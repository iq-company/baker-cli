# =============================================================================
# Base Image - Generated from template
# Variant: {{ variant }}
# =============================================================================
# DO NOT EDIT - This file is generated by: baker gen-docker --variant {{ variant }}
# Edit the template instead: docker-templates/base/Dockerfile.j2
# =============================================================================

ARG PYTHON_VERSION={{ python_version | default("3.12") }}
{% if variant == "alpine" %}
FROM python:${PYTHON_VERSION}-alpine
{% else %}
ARG DEBIAN_BASE={{ debian_base | default("bookworm") }}
FROM python:${PYTHON_VERSION}-slim-${DEBIAN_BASE}
{% endif %}

LABEL maintainer="{{ maintainer | default('baker-cli') }}"
LABEL variant="{{ variant }}"

# --- System packages ---
{% if system_packages %}
{{ recipe("install_packages", packages=system_packages) }}
{% endif %}

# --- User setup ---
{% if image_user %}
{{ recipe("create_user", user=image_user, uid=image_uid | default(1000), gid=image_gid | default(1000)) }}
USER {{ image_user }}
{% endif %}

WORKDIR {{ workdir | default("/app") }}
